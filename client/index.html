<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Hi·ªáu Su·∫•t SSE vs WebSocket</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üî¨ So S√°nh Hi·ªáu Su·∫•t SSE vs WebSocket</h1>
            <p class="subtitle">Ph√¢n t√≠ch giao th·ª©c truy·ªÅn th√¥ng th·ªùi gian th·ª±c cho m·∫°ng m√°y t√≠nh</p>
        </header>

        <div class="stats-overview">
            <div class="stat-card">
                <h3>üì° Client SSE</h3>
                <div class="stat-value" id="sse-clients">0</div>
                <div class="stat-label">K·∫øt n·ªëi ƒëang ho·∫°t ƒë·ªông</div>
            </div>
            <div class="stat-card">
                <h3>üîå Client WebSocket</h3>
                <div class="stat-value" id="websocket-clients">0</div>
                <div class="stat-label">K·∫øt n·ªëi ƒëang ho·∫°t ƒë·ªông</div>
            </div>
            <div class="stat-card">
                <h3>üì® T·ªïng tin nh·∫Øn</h3>
                <div class="stat-value" id="total-messages">0</div>
                <div class="stat-label">Tin nh·∫Øn ƒë√£ g·ª≠i</div>
            </div>
            <div class="stat-card">
                <h3>‚è±Ô∏è Th·ªùi gian ho·∫°t ƒë·ªông</h3>
                <div class="stat-value" id="uptime">0s</div>
                <div class="stat-label">Server ƒëang ch·∫°y</div>
            </div>
        </div>

        <div class="controls">
            <button id="connect-all" class="btn btn-primary">K·∫øt n·ªëi t·∫•t c·∫£ giao th·ª©c</button>
            <button id="disconnect-all" class="btn btn-secondary">Ng·∫Øt k·∫øt n·ªëi t·∫•t c·∫£</button>
            <button id="clear-data" class="btn btn-warning">X√≥a d·ªØ li·ªáu</button>
            <div class="broadcast-control">
                <input type="text" id="broadcast-message" placeholder="Nh·∫≠p tin nh·∫Øn ph√°t s√≥ng..." class="input-field">
                <button id="broadcast-btn" class="btn btn-info">Ph√°t s√≥ng</button>
            </div>
        </div>

        <div class="comparison-grid">
            <!-- SSE Panel -->
            <div class="protocol-panel sse-panel">
                <div class="panel-header">
                    <h2>üì° Server-Sent Events (SSE)</h2>
                    <div class="connection-status">
                        <span class="status-dot" id="sse-status-dot"></span>
                        <span id="sse-status">Ch∆∞a k·∫øt n·ªëi</span>
                    </div>
                </div>
                
                <div class="panel-controls">
                    <button id="sse-connect" class="btn btn-success">K·∫øt n·ªëi SSE</button>
                    <button id="sse-disconnect" class="btn btn-danger" disabled>Ng·∫Øt k·∫øt n·ªëi</button>
                </div>

                <div class="protocol-stats">
                    <div class="metric">
                        <span class="metric-label">Tin nh·∫Øn nh·∫≠n ƒë∆∞·ª£c:</span>
                        <span class="metric-value" id="sse-message-count">0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">ƒê·ªô tr·ªÖ trung b√¨nh:</span>
                        <span class="metric-value" id="sse-avg-latency">0ms</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Tin nh·∫Øn cu·ªëi:</span>
                        <span class="metric-value" id="sse-last-message">-</span>
                    </div>
                </div>

                <div class="message-log">
                    <h4>Nh·∫≠t k√Ω tin nh·∫Øn (10 tin cu·ªëi):</h4>
                    <div id="sse-messages" class="log-container"></div>
                </div>
            </div>

            <!-- WebSocket Panel -->
            <div class="protocol-panel websocket-panel">
                <div class="panel-header">
                    <h2>üîå WebSocket</h2>
                    <div class="connection-status">
                        <span class="status-dot" id="websocket-status-dot"></span>
                        <span id="websocket-status">Ch∆∞a k·∫øt n·ªëi</span>
                    </div>
                </div>
                
                <div class="panel-controls">
                    <button id="websocket-connect" class="btn btn-success">K·∫øt n·ªëi WebSocket</button>
                    <button id="websocket-disconnect" class="btn btn-danger" disabled>Ng·∫Øt k·∫øt n·ªëi</button>
                </div>

                <div class="protocol-stats">
                    <div class="metric">
                        <span class="metric-label">Tin nh·∫Øn nh·∫≠n ƒë∆∞·ª£c:</span>
                        <span class="metric-value" id="websocket-message-count">0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">ƒê·ªô tr·ªÖ trung b√¨nh:</span>
                        <span class="metric-value" id="websocket-avg-latency">0ms</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Tin nh·∫Øn cu·ªëi:</span>
                        <span class="metric-value" id="websocket-last-message">-</span>
                    </div>
                </div>

                <div class="message-input">
                    <input type="text" id="websocket-input" placeholder="Nh·∫≠p tin nh·∫Øn ƒë·ªÉ g·ª≠i qua WebSocket..." class="input-field">
                    <button id="websocket-send" class="btn btn-info" disabled>G·ª≠i</button>
                </div>

                <div class="message-log">
                    <h4>Nh·∫≠t k√Ω tin nh·∫Øn (10 tin cu·ªëi):</h4>
                    <div id="websocket-messages" class="log-container"></div>
                </div>
            </div>
        </div>

        <!-- Performance Charts -->
        <div class="charts-section">
            <h2>üìä Ch·ªâ s·ªë hi·ªáu su·∫•t</h2>
            <div class="charts-grid">
                <div class="chart-container">
                    <h4>So s√°nh ƒë·ªô tr·ªÖ (ms)</h4>
                    <canvas id="latencyChart"></canvas>
                </div>
                <div class="chart-container">
                    <h4>Tin nh·∫Øn nh·∫≠n ƒë∆∞·ª£c</h4>
                    <canvas id="throughputChart"></canvas>
                </div>
                <div class="chart-container">
                    <h4>M√¥ ph·ªèng ƒë·ªô tr·ªÖ m·∫°ng</h4>
                    <canvas id="networkChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Technical Comparison -->
        <div class="technical-comparison">
            <h2>üîç So s√°nh k·ªπ thu·∫≠t</h2>
            <div class="comparison-table">
                <table>
                    <thead>
                        <tr>
                            <th>Kh√≠a c·∫°nh</th>
                            <th>Server-Sent Events (SSE)</th>
                            <th>WebSocket</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Giao ti·∫øp</td>
                            <td>‚úÖ M·ªôt chi·ªÅu (Server ‚Üí Client)</td>
                            <td>‚úÖ Hai chi·ªÅu (Client ‚Üî Server)</td>
                        </tr>
                        <tr>
                            <td>Giao th·ª©c</td>
                            <td>HTTP (text/event-stream)</td>
                            <td>WebSocket (ws://) qua TCP</td>
                        </tr>
                        <tr>
                            <td>K·∫øt n·ªëi l·∫°i</td>
                            <td>‚úÖ T·ª± ƒë·ªông</td>
                            <td>‚ùå Th·ªß c√¥ng</td>
                        </tr>
                        <tr>
                            <td>ƒê·ªô tr·ª• t·∫£i</td>
                            <td>Th·∫•p (ch·ªâ c√≥ HTTP headers)</td>
                            <td>R·∫•t th·∫•p (sau khi handshake)</td>
                        </tr>
                        <tr>
                            <td>Tr∆∞·ªùng h·ª£p s·ª≠ d·ª•ng</td>
                            <td>Th√¥ng b√°o, Tin t·ª©c tr·ª±c ti·∫øp, Stream log</td>
                            <td>Chat, Game, C·ªông t√°c th·ªùi gian th·ª±c</td>
                        </tr>
                        <tr>
                            <td>H·ªó tr·ª£ tr√¨nh duy·ªát</td>
                            <td>T·∫•t c·∫£ tr√¨nh duy·ªát hi·ªán ƒë·∫°i (tr·ª´ IE)</td>
                            <td>T·∫•t c·∫£ tr√¨nh duy·ªát hi·ªán ƒë·∫°i</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>
</html>